const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/slidev/CodeRunner-Djf55lDd.js","assets/modules/unplugin-icons-BMRVOIvR.js","assets/modules/vue-Dthrahve.js","assets/monaco/bundled-types-xoPec8bX.js","assets/modules/file-saver-igGfcqei.js","assets/monaco/bundled-types-BrqxbeIz.css","assets/slidev/context-CrHcjeUU.js","assets/index-rWViRyE3.js","assets/modules/shiki-DBI9AuAS.js","assets/modules/shiki-BPvBenZD.css","assets/index-DD92WybB.css","assets/slidev/IconButton.vue_vue_type_script_setup_true_lang-DOKMrMNi.js","assets/CodeRunner-YBfxSSx9.css"])))=>i.map(i=>d[i]);
import{_ as C,n as H}from"../monaco/bundled-types-xoPec8bX.js";import{d as K,t as l,z as x,aD as Q,S as F,n as A,o as b,b as q,e as w,h as G,c as k,I as g,g as J,W as X,k as Z,l as ee,m as te,q as oe,s as ne}from"../modules/vue-Dthrahve.js";import{l as $}from"../lz-string-7V7f_eN4.js";import{a as ae,Y as L}from"../index-rWViRyE3.js";import{u as N,f as ie}from"./context-CrHcjeUU.js";import{I as re}from"./default-0Scs9DED.js";import"../modules/file-saver-igGfcqei.js";import"../modules/shiki-DBI9AuAS.js";const se={class:"relative slidev-monaco-container"},le=K({__name:"Monaco",props:{codeLz:{default:""},diffLz:{},lang:{default:"typescript"},readonly:{type:Boolean,default:!1},lineNumbers:{default:"off"},height:{default:"initial"},editorOptions:{},ata:{type:Boolean,default:!0},runnable:{type:Boolean,default:!1},writable:{},autorun:{type:[Boolean,String],default:!0},showOutputAt:{type:[null,Boolean,String,Number,Array]},outputHeight:{},highlightOutput:{type:Boolean,default:!0},runnerOptions:{}},setup(E){const e=E,V=X(()=>C(()=>import("./CodeRunner-Djf55lDd.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12])).then(s=>s.default)),i=l($.decompressFromBase64(e.codeLz).trimEnd()),f=e.diffLz&&l($.decompressFromBase64(e.diffLz).trimEnd()),B=x(()=>e.writable&&!e.readonly&&!1),d={ts:"typescript",js:"javascript"}[e.lang]??e.lang,m={typescript:"mts",javascript:"mjs",ts:"mts",js:"mjs"}[e.lang]??e.lang,h=l(),v=l(),_=l(0),r=l(),P=x(()=>e.height==="auto"?`${_.value}px`:e.height==="initial"?`${r.value}px`:e.height),M=l(),{$page:U,$renderContext:R}=N(),{currentSlideNo:T}=ae(),W=Q(()=>Math.abs(U.value-T.value)<=1&&M.value,s=>{["slide","presenter"].includes(R.value)?s():setTimeout(s,5e3)});return F(async()=>{const{default:s}=await C(async()=>{const{default:t}=await import("../monaco/bundled-types-xoPec8bX.js").then(a=>a.w);return{default:t}},__vite__mapDeps([3,2,4,5])),{ata:u,monaco:o,editorOptions:j}=await s(),c=o.editor.createModel(i.value,d,o.Uri.parse(`file:///${L()}.${m}`));c.onDidChangeContent(()=>i.value=c.getValue());const S={automaticLayout:!0,readOnly:e.readonly,lineNumbers:e.lineNumbers,minimap:{enabled:!1},overviewRulerBorder:!1,overviewRulerLanes:0,padding:{top:10,bottom:10},lineNumbersMinChars:3,bracketPairColorization:{enabled:!1},tabSize:2,fontSize:11.5,fontFamily:"var(--slidev-code-font-family)",scrollBeyondLastLine:!1,...j,...e.editorOptions};let n;if(f){const t=o.editor.createModel(f.value,d,o.Uri.parse(`file:///${L()}.${m}`));t.onDidChangeContent(()=>i.value=c.getValue());const a=o.editor.createDiffEditor(v.value,{renderOverviewRuler:!1,...S});a.setModel({original:c,modified:t});const p=a.getOriginalEditor(),y=a.getModifiedEditor(),z=()=>{const O=Math.max(p.getContentHeight(),y.getContentHeight())+4;r.value??(r.value=O),_.value=O,A(()=>a.layout())};p.onDidContentSizeChange(z),y.onDidContentSizeChange(z),n=y}else{const t=o.editor.create(v.value,{model:c,lineDecorationsWidth:0,...S});t.onDidContentSizeChange(a=>{const p=a.contentHeight+4;r.value??(r.value=p),_.value=p,A(()=>n.layout())}),n=t}M.value=()=>{W(),C(()=>import("../monaco/bundled-types-xoPec8bX.js").then(t=>t.x),__vite__mapDeps([3,2,4,5])),e.ata&&(u(n.getValue()),n.onDidChangeModelContent(H(1e3,()=>{u(n.getValue())})))};const Y=n.layoutContentWidget.bind(n);n.layoutContentWidget=t=>{Y(t),t.getId()==="editor.contrib.resizableContentHoverWidget"&&(t._resizableNode.domNode.style.transform=t._positionPreference===1?"translateY(calc(100% * (var(--slidev-slide-scale) - 1)))":"")},n.addAction({id:"slidev-save",label:"Save",keybindings:[o.KeyMod.CtrlCmd|o.KeyCode.KeyS],run:()=>{B.value,console.warn("[Slidev] this monaco editor is not writable, save action is ignored.")}}),A(()=>o.editor.remeasureFonts())}),(s,u)=>(b(),q("div",se,[w("div",{ref_key:"outer",ref:h,class:"relative slidev-monaco-container-inner",style:G({height:P.value})},[w("div",{ref_key:"container",ref:v,class:"absolute inset-0.5"},null,512)],4),e.runnable?(b(),k(g(V),{key:0,modelValue:i.value,"onUpdate:modelValue":u[0]||(u[0]=o=>i.value=o),lang:g(d),autorun:e.autorun,"show-output-at":e.showOutputAt,height:e.outputHeight,"highlight-output":e.highlightOutput,"runner-options":e.runnerOptions},null,8,["modelValue","lang","autorun","show-output-at","height","highlight-output","runner-options"])):J("v-if",!0)]))}}),de=w("h1",null,"Editor",-1),ue={__name:"template.md__slidev_7",setup(E){const{$slidev:e,$nav:V,$clicksContext:i,$clicks:f,$page:B,$renderContext:D,$frontmatter:d}=N();return i.setup(),(I,m)=>{const h=le;return b(),k(re,oe(ne(g(ie)(g(d),6))),{default:Z(()=>[de,ee(h,te({"code-lz":"GYJw9gtgBAJghgFzgYwDZwM4YKYagSwgAcwQFZEV0sAoGgAXiTUwxpaygDV9sB3ALJgY2VAC4aUKVGRhUAVwgA7MVAwIQk6cHypUAfT74EAC32yl61QCMwcrVIBuccVACqS/GCUBtdSAAaAiUEIOBUMEQAXToQbABHeVwEfSY4KABeKABvLQAiWQVlPNU8gGE5RSUoAEE8gPydPUNjMwt1EqgAMRccBqk851ROvIhsOCU8mgBfOkdePn0IYVFM7gWhEVQACgAqXbjE5NTKAEoaIA",lang:"python"},{}),null,16)]),_:1},16)}}},ye=ue;export{ye as default};
